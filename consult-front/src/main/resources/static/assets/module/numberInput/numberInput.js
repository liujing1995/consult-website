layui.define(["jquery","util","layer"],function(c){var d=layui.$,g=layui.util,i=layui.layer,j="input[number-input]",h="layui-input-number",e=['<div class="layui-number-input-btn">','<i class="layui-icon layui-icon-up" lay-click="numberUp"></i>','<i class="layui-icon layui-icon-down" lay-click="numberDown"></i>',"</div>"].join(""),a=['<style type="text/css">',".layui-number-input-container{position:relative;width:100%}","."+h+"::-webkit-outer-spin-button,."+h+"::-webkit-inner-spin-button{-webkit-appearance: none;}","."+h+"{-moz-appearance: textfield;padding-right:22px}",".layui-number-input-btn{position:absolute;top:0;right:0;width:20px;height:100%;}",".layui-number-input-btn i{position:absolute;width:20px;height:50%;bottom:0;font-size:12px;text-align:center;line-height:16px;cursor: pointer;}",".layui-number-input-btn i:first-child{top:0}",".layui-number-input-btn i:hover{background:#eee;}","</style>"].join("");d("head link:last")[0]&&d("head link:last").after(a)||d("head").append(a);var b={options:{elem:j},render:function(k){var l=this;l.options=d.extend(l.options,k);d(l.options.elem).not("[lay-ignore]").addClass(h).wrap('<div class="layui-number-input-container"></div>');d(l.options.elem).not("[lay-ignore]").after(e);l.listen()},listen:function(){var l=this;d(l.options.elem).bind("input propertychange",function(){var m=d(this).val();d(this).val(m.replace(/[^\-?\d.]/g,""))});d(l.options.elem).keydown(function(n){var o=n||window.event;var m=o.keyCode||o.which;switch(m){case 38:d(this).siblings(".layui-number-input-btn").children('[lay-click="numberUp"]').trigger("click").css("background","#eee");break;case 40:d(this).siblings(".layui-number-input-btn").children('[lay-click="numberDown"]').trigger("click").css("background","#eee");break;default:break}return false});d(l.options.elem).keyup(function(){var n=event||window.event;var m=n.keyCode||n.which;switch(m){case 38:d(this).siblings(".layui-number-input-btn").children('[lay-click="numberUp"]').css("background","");break;case 40:d(this).siblings(".layui-number-input-btn").children('[lay-click="numberDown"]').css("background","");break;default:break}return false});var k;d('[lay-click="numberUp"],[lay-click="numberDown"]').mousedown(function(){var m=d(this);k=setInterval(function(){m.trigger("click")},200)});d('[lay-click="numberUp"],[lay-click="numberDown"]').mouseup(function(){clearInterval(k)});d('[lay-click="numberUp"],[lay-click="numberDown"]').mouseout(function(){clearInterval(k)});g.event("lay-click",{numberUp:function(p){var o=p.parent().parent().children("."+h);var m=o.val()||0;var n=o.attr("step")||1;var q=o.attr("max");if(q!=undefined){if(m>=q){i.tips("最大值"+q,o,{tips:1});return false}}m=l.add(parseFloat(m),parseFloat(n));o.val("").focus().val(m)},numberDown:function(q){var p=q.parent().parent().children("."+h);var m=p.val()||0;var n=p.attr("step")||1;var o=p.attr("min");if(o!=undefined){if(m<=o){i.tips("最小值"+o,p,{tips:1});return false}}m=l.subtraction(parseFloat(m),parseFloat(n));p.val("").focus().val(m)}})},add:function(p,o){var n,l,k;try{n=p.toString().split(".")[1].length}catch(q){n=0}try{l=o.toString().split(".")[1].length}catch(q){l=0}k=Math.pow(10,Math.max(n,l));return(p*k+o*k)/k},subtraction:function(q,p){var o,l,k,s;try{o=q.toString().split(".")[1].length}catch(r){o=0}try{l=p.toString().split(".")[1].length}catch(r){l=0}k=Math.pow(10,Math.max(o,l));s=(o>=l)?o:l;return((q*k-p*k)/k).toFixed(s)}};var f={render:function(k){b.render(k)}};c("numberInput",f)});